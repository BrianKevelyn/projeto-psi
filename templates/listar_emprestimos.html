{% extends 'base.html' %}
{% block title %}Meus Empréstimos{% endblock %}

{% block content %}
<h1>Meus Empréstimos</h1>

{% if emprestimos %}
  <table class="table">
    <thead>
      {% for emp in emprestimos %}
      <tr>
        <td>{{ emp.livro.liv_titulo }}</td>
        <td>{{ emp.emp_data_emprestimo.strftime('%d/%m/%Y') }}</td>
        <td>{{ emp.emp_data_a_devolver.strftime('%d/%m/%Y') }}</td>
        <td>
          {% set status = emp.status.lower() if emp.status else '' %}
          {% if status == 'atrasado' %}
            <span class="text-danger fw-bold">
              <i class="bi bi-exclamation-triangle-fill"></i> {{ emp.status }}
            </span>
          {% elif status == 'devolvido' %}
            <span class="text-success fw-bold">{{ emp.status }}</span>
          {% elif status == 'em andamento' %}
            <span class="text-warning fw-bold">{{ emp.status }}</span>
          {% else %}
            <span>{{ emp.status }}</span>
          {% endif %}
        </td>
      </tr>
      {% endfor %}

    </tbody>
  </table>
{% else %}
  <p>Você não possui empréstimos ativos.</p>
{% endif %}

{% endblock %}
